<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layouts/layout}">
<th:block layout:fragment="css">
  <style>
    .btn-custom {
        margin-top: 30px;
        text-align: right;
    }
  </style>
</th:block>
<th:block layout:fragment="script">
  <script th:src="@{/js/validation.js}"></script>
  <script>
    function sendFormData() {
        let data = document.getElementById("create_batch_form");
        //TODO : 입력 데이터 1차 검증 필요
        fetch("/api/batchInfo", {
            method: "POST",
            body: new FormData(data),
        }).then((res) => {
            if (res.status === 200) {
                alert("등록되었습니다.");
            } else {
                alert("신규 상품 등록에 실패하였습니다.");
            }
        }).catch(err => console.error(err));
    }
  </script>
</th:block>
<div layout:fragment="content">
  <section class="py-5">
    <div class="container px-4 px-lg-5 mt-5">
      <form id="create_batch_form">
        <div class="form-group">
          <label for="category" class="col-sm-2 col-form-label">상품 카테고리</label>
          <div class="col-sm-10">
            <input type="text" class="form-control" id="category" name="category" placeholder="상품의 카테고리를 입력하세요.">
          </div>
        </div>
        <div class="form-group">
          <label for="productNm" class="col-sm-2 col-form-label">상품명</label>
          <div class="col-sm-10">
            <input type="text" class="form-control" id="productNm" name="productNm" placeholder="상품의 이름을 입력하세요.">
          </div>
        </div>
        <div class="form-group">
          <label for="url" class="col-sm-2 col-form-label">URL</label>
          <div class="col-sm-10">
            <input type="text" class="form-control" id="url" name="url" placeholder="상품의 URL을 입력하세요.">
          </div>
        </div>
        <div class="form-group">
          <label for="cssQuery" class="col-sm-2 col-form-label">CSS</label>
          <div class="col-sm-10">
            <input type="text" class="form-control" id="cssQuery" name="cssQuery" placeholder="상품의 CSS를 입력하세요.">
          </div>
        </div>
        <div class="form-group">
          <div class="col-sm-10 btn-custom">
            <button type="button" class="btn btn-primary" th:onclick="'javascript:sendFormData();'">등록</button>
          </div>
        </div>
      </form>
    </div>
  </section>
</div>
</html>
